define(["require","exports","durandal/app"],function(n,t,i){function e(){return new u}function o(){return r.fetchMetadata().then(function(){t.modelBuilder&&t.modelBuilder(r.metadataStore);var n=breeze.EntityQuery.from("resources/lookups");return r.executeQuery(n)})}var f=i;breeze.NamingConvention.camelCase.setAsDefault();var r=new breeze.EntityManager("/breeze"),u=function(){function n(){}return n.prototype.manager=function(){return this._manager||(this._manager=r.createEmptyCopy(),this._manager.importEntities(r.exportEntities()),this._manager.hasChangesChanged.subscribe(function(){f.trigger("hasChanges")})),this._manager},n}();t.EntityManagerProvider=u,t.modelBuilder,t.create=e,t.prepare=o})